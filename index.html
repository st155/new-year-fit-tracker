<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
    <title>Elite10 - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –§–∏—Ç–Ω–µ—Å –¢—Ä–µ–∫–µ—Ä | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Whoop, Garmin, Withings</title>
    <meta name="description" content="–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–∫–µ—Ä —Ñ–∏—Ç–Ω–µ—Å–∞ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏ Apple Health, Whoop, Garmin, Withings –∏ Ultrahuman. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å, –¥–æ—Å—Ç–∏–≥–∞–π—Ç–µ —Ü–µ–ª–µ–π, —É—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ —á–µ–ª–ª–µ–Ω–¥–∂–∞—Ö." />
    <meta name="author" content="Elite10 Team" />
    <meta name="keywords" content="—Ñ–∏—Ç–Ω–µ—Å —Ç—Ä–µ–∫–µ—Ä, whoop –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, garmin, withings, apple health, vo2max, —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, —Å–æ–Ω, –ø—Ä–æ–≥—Ä–µ—Å—Å" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://elite10.club/" />

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#00ffff" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Fitness Pro" />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/icon-512x512.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/icon-512x512.png" />
    <link rel="apple-touch-icon" href="/icon-512x512.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/icon-512x512.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icon-512x512.png" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://elite10.club/" />
    <meta property="og:title" content="Elite10 - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –§–∏—Ç–Ω–µ—Å –¢—Ä–µ–∫–µ—Ä" />
    <meta property="og:description" content="–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏ Whoop, Garmin, Withings, Apple Health. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, VO2Max, —Å–æ–Ω, —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏." />
    <meta property="og:image" content="https://elite10.club/icon-512x512.png" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://elite10.club/" />
    <meta name="twitter:title" content="Elite10 - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –§–∏—Ç–Ω–µ—Å –¢—Ä–µ–∫–µ—Ä" />
    <meta name="twitter:description" content="–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏ Whoop, Garmin, Withings, Apple Health." />
    <meta name="twitter:image" content="https://elite10.club/icon-512x512.png" />
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://d.elite10.club" />
    <link rel="dns-prefetch" href="https://d.elite10.club" />
    
    <!-- Module preload hint for main entry -->
    <link rel="modulepreload" href="/src/main.tsx" />
  </head>

  <body>
    <div id="root"></div>
    
    <!-- Boot Debug Overlay -->
    <div id="boot-debug-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); color:#fff; z-index:999999; padding:20px; box-sizing:border-box; overflow:auto; font-family:monospace;">
      <h2 style="color:#ff4444;">‚ö†Ô∏è App Failed to Mount</h2>
      <p>React didn't mount within 4 seconds. Check console for errors.</p>
      <div id="boot-errors" style="margin:15px 0; padding:10px; background:#222; border-left:3px solid #ff4444; max-height:300px; overflow:auto;"></div>
      <div id="boot-diagnostics" style="margin:15px 0; padding:10px; background:#1a1a1a; border-left:3px solid #ffaa00; font-size:12px;"></div>
      <button onclick="location.href='/?recover=1'" style="margin:5px; padding:10px 20px; background:#ff4444; border:none; color:#fff; cursor:pointer; border-radius:4px;">Run Recovery</button>
      <button onclick="location.href='/health-check.html'" style="margin:5px; padding:10px 20px; background:#4444ff; border:none; color:#fff; cursor:pointer; border-radius:4px;">Static Health Check</button>
      <button onclick="location.href='/test-mount.html'" style="margin:5px; padding:10px 20px; background:#44ff44; border:none; color:#fff; cursor:pointer; border-radius:4px;">Minimal Test</button>
      <button onclick="navigator.clipboard.writeText(document.getElementById('boot-diagnostics').innerText)" style="margin:5px; padding:10px 20px; background:#ff8800; border:none; color:#fff; cursor:pointer; border-radius:4px;">Copy Diagnostics</button>
      <button onclick="location.reload()" style="margin:5px; padding:10px 20px; background:#666; border:none; color:#fff; cursor:pointer; border-radius:4px;">Reload</button>
    </div>
    
    <script>
      // Boot debug system
      (function() {
        window.__react_mounted__ = false;
        window.__lastErrors = [];
        
        // Capture all errors before React loads
        window.onerror = function(msg, url, line, col, error) {
          var errMsg = msg + ' at ' + url + ':' + line + ':' + col;
          window.__lastErrors.push(errMsg);
          console.error('üí• [Boot] Error:', errMsg, error);
        };
        
        window.onunhandledrejection = function(e) {
          var errMsg = 'Unhandled promise rejection: ' + (e.reason || 'unknown');
          window.__lastErrors.push(errMsg);
          console.error('üí• [Boot] Promise rejection:', e.reason);
        };
        
        // Check if React mounted after 4 seconds
        setTimeout(function() {
          if (!window.__react_mounted__) {
            console.error('üí• [Boot] React failed to mount in 4 seconds');
            var overlay = document.getElementById('boot-debug-overlay');
            var errorsDiv = document.getElementById('boot-errors');
            var diagDiv = document.getElementById('boot-diagnostics');
            
            // Show captured errors
            if (window.__lastErrors.length > 0) {
              errorsDiv.innerHTML = '<strong>Errors:</strong><br>' + window.__lastErrors.join('<br>');
            } else {
              errorsDiv.innerHTML = '<em>No JavaScript errors captured. Possible CSP/network issue.</em>';
            }
            
            // Enhanced diagnostics
            var diagnostics = [];
            diagnostics.push('<strong>Diagnostics:</strong>');
            diagnostics.push('User Agent: ' + navigator.userAgent);
            diagnostics.push('URL: ' + location.href);
            
            // Check for loaded resources
            if (performance && performance.getEntriesByType) {
              var resources = performance.getEntriesByType('resource');
              var mainScript = resources.filter(function(r) { return r.name.includes('/src/main.tsx') || r.name.includes('main'); });
              if (mainScript.length > 0) {
                diagnostics.push('‚úÖ Main script loaded: ' + mainScript[0].name);
              } else {
                diagnostics.push('‚ùå Main script NOT found in resources');
              }
              
              var failedResources = resources.filter(function(r) { return r.transferSize === 0 && r.decodedBodySize === 0; });
              if (failedResources.length > 0) {
                diagnostics.push('‚ö†Ô∏è Potentially blocked resources: ' + failedResources.length);
                failedResources.slice(0, 5).forEach(function(r) {
                  diagnostics.push('  - ' + r.name);
                });
              }
            }
            
            // Check Service Worker
            if ('serviceWorker' in navigator) {
              diagnostics.push('SW Controller: ' + (navigator.serviceWorker.controller ? 'Active' : 'None'));
            }
            
            // Check for CSP violations
            diagnostics.push('CSP Violations: Check console for "Refused to..." messages');
            
            diagDiv.innerHTML = diagnostics.join('<br>');
            overlay.style.display = 'block';
          }
        }, 4000);
      })();
      
      // Emergency pre-boot recovery and dev purge
      (function () {
        var params = new URLSearchParams(location.search);
        var hasQueryParam = params.get('recover') === '1' || params.has('recover');
        var hasRecoverPath = /\/(recover|recover1)(\/|$)/i.test(location.pathname);
        var hasRecoverHash = /recover=?(1|true)?/i.test(location.hash);
        var hasLocalFlag = localStorage.getItem('recoverOnce') === '1';
        var shouldRecover = hasQueryParam || hasRecoverPath || hasRecoverHash || hasLocalFlag;
        var isDevHost = location.hostname === 'localhost' || location.hostname.endsWith('.lovableproject.com');

        function purgeAll() {
          try {
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker.getRegistrations().then(function (regs) {
                regs.forEach(function (r) { r.unregister(); });
              });
              if (navigator.serviceWorker.controller) {
                try { navigator.serviceWorker.controller.postMessage({ type: 'SKIP_WAITING' }); } catch (_) {}
              }
            }
            if ('caches' in window) {
              caches.keys().then(function (keys) { keys.forEach(function (k) { caches.delete(k); }); });
            }
            localStorage.removeItem('recoverOnce');
            console.log('[Boot] Purge done');
          } catch (e) {
            console.warn('[Boot] Purge failed', e);
          }
        }

        if (shouldRecover || isDevHost) {
          purgeAll();
        }

        if (shouldRecover) {
          var url = location.origin + location.pathname + location.hash;
          location.replace(url);
        }
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
