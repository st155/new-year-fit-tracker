/**
 * Terra Activity Type Code to readable name mapping
 * Based on Terra API documentation
 */

export const TERRA_ACTIVITY_TYPES: Record<number, string> = {
  0: 'Активность',
  1: 'Бег',
  2: 'Велосипед',
  8: 'Бег', // Garmin Running type
  15: 'Эллипсоид',
  16: 'Бейсбол',
  17: 'Баскетбол',
  18: 'Гребля',
  19: 'Фехтование',
  20: 'Хоккей на траве',
  21: 'Американский футбол',
  22: 'Гольф',
  24: 'Хоккей',
  25: 'Лакросс',
  27: 'Регби',
  28: 'Парусный спорт',
  29: 'Лыжи',
  30: 'Футбол',
  31: 'Софтбол',
  32: 'Сквош',
  33: 'Плавание',
  34: 'Теннис',
  35: 'Легкая атлетика',
  36: 'Волейбол',
  37: 'Водное поло',
  38: 'Борьба',
  39: 'Бокс',
  42: 'Танцы',
  43: 'Пилатес',
  44: 'Йога',
  45: 'Медитация', // Was incorrectly mapped - 45 is Meditation in Whoop
  47: 'Лыжные гонки',
  48: 'Кроссфит',
  49: 'Дуатлон',
  51: 'Гимнастика',
  52: 'Хайкинг',
  53: 'Конный спорт',
  55: 'Каякинг',
  56: 'Единоборства',
  57: 'Горный велосипед',
  59: 'Пауэрлифтинг',
  60: 'Скалолазание',
  61: 'Сап-серфинг',
  62: 'Триатлон',
  63: 'Функциональная тренировка',
  64: 'Серфинг',
  65: 'Эллиптический тренажер',
  66: 'Степпер',
  70: 'Медитация',
  71: 'Другое',
  73: 'Дайвинг',
  74: 'Тактические операции',
  75: 'Медицинские операции',
  76: 'Полеты',
  77: 'Водные операции',
  82: 'Алтимат',
  83: 'Скалолазание',
  84: 'Скакалка',
  85: 'Австралийский футбол',
  86: 'Скейтбординг',
  87: 'Коучинг',
  88: 'Ледяная ванна',
  89: 'Прогулка',
  90: 'Гейминг',
  91: 'Сноуборд',
  92: 'Мотокросс',
  93: 'Кэдди',
  94: 'Гонка с препятствиями',
  95: 'Автогонки',
  96: 'HIIT',
  97: 'Сайкл',
  98: 'Джиу-джитсу',
  99: 'Физический труд',
  100: 'Крикет',
  101: 'Пиклбол',
  102: 'Роликовые коньки',
  103: 'Бокс фитнес',
  104: 'Спайкбол',
  105: 'Инвалидная коляска',
  106: 'Падл-теннис',
  107: 'Барре',
  108: 'Сценическое выступление',
  109: 'Стрессовая работа',
  110: 'Паркур',
  111: 'Гэльский футбол',
  112: 'Херлинг',
  121: 'Цирковое искусство',
  125: 'Массаж',
  230: 'Просмотр спорта',
  231: 'Assault Bike',
  232: 'Кикбоксинг',
  233: 'Растяжка',
  234: 'Настольный теннис',
  235: 'Бадминтон',
  236: 'Нетбол',
  237: 'Сауна',
  238: 'Диск-гольф',
  239: 'Работа в саду',
  240: 'Воздушная компрессия',
  241: 'Перкуссионный массаж',
  242: 'Пейнтбол',
  243: 'Фигурное катание',
  244: 'Гандбол',
};

/**
 * Map Terra activity type code to readable name
 */
export function mapTerraActivityType(activityType: string | number | null | undefined, provider: string): string {
  if (!activityType) {
    return 'Тренировка';
  }

  // If it's already a string (Withings, etc.), return as is
  if (typeof activityType === 'string') {
    // Try to parse if it's a numeric string
    const parsed = parseInt(activityType, 10);
    if (!isNaN(parsed)) {
      return TERRA_ACTIVITY_TYPES[parsed] || `Активность ${parsed}`;
    }
    return activityType;
  }

  // For Whoop, Garmin, Ultrahuman - use numeric code mapping
  const numericType = typeof activityType === 'number' ? activityType : parseInt(activityType, 10);
  
  if (isNaN(numericType)) {
    return 'Тренировка';
  }

  return TERRA_ACTIVITY_TYPES[numericType] || `Активность ${numericType}`;
}
